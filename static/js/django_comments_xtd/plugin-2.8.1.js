!function(e){function t(t){for(var n,i,s=t[0],l=t[1],c=t[2],m=0,p=[];m<s.length;m++)i=s[m],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&p.push(a[i][0]),a[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);for(u&&u(t);p.length;)p.shift()();return o.push.apply(o,c||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],n=!0,s=1;s<r.length;s++){var l=r[s];0!==a[l]&&(n=!1)}n&&(o.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},a={0:0},o=[];function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;o.push([9,1]),r()}([function(e,t){e.exports=React},function(e,t){e.exports=django},function(e,t){e.exports=jQuery},function(e,t){e.exports=ReactDOM},,,,,,function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(3),i=r.n(o),s=r(2),l=r.n(s);function c(e){l.a.ajaxSetup({beforeSend:function(t,r){var n;n=r.type,/^(GET|HEAD|OPTIONS|TRACE)$/.test(n)||this.crossDomain||t.setRequestHeader("X-CSRFToken",function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var r=document.cookie.split(";"),n=0;n<r.length;n++){var a=jQuery.trim(r[n]);if(a.substring(0,e.length+1)===e+"="){t=decodeURIComponent(a.substring(e.length+1));break}}return t}(e))}})}var u=r(1),m=r.n(u),p=r(4);r(6);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=b(e);if(t){var a=b(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return y(this,r)}}function y(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(i,e);var t,r,n,o=_(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={name:"",email:"",url:"",followup:!1,comment:"",reply_to:t.props.reply_to||0,visited:{name:!1,email:!1,comment:!1},errors:{name:!1,email:!1,comment:!1},previewing:!1,alert:{message:"",cssc:""}},t.handle_input_change=t.handle_input_change.bind(v(t)),t.handle_ajax_error=t.handle_ajax_error.bind(v(t)),t.handle_blur=t.handle_blur.bind(v(t)),t.handle_submit=t.handle_submit.bind(v(t)),t.handle_preview=t.handle_preview.bind(v(t)),t.reset_form=t.reset_form.bind(v(t)),t.fhelp=a.a.createElement("span",{className:"form-text small invalid-feedback"},m.a.gettext("This field is required.")),t}return t=i,(r=[{key:"handle_input_change",value:function(e){var t=e.target,r="checkbox"===t.type?t.checked:t.value,n=t.name;this.setState(function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},n,r))}},{key:"handle_blur",value:function(e){return function(t){var r=this.state.visited;r[e]=!0,this.setState({visited:r})}.bind(this)}},{key:"validate",value:function(){var e=this.state.errors;return e.name=!1,e.email=!1,this.state.comment.length?e.comment=!1:e.comment=!0,this.props.is_authenticated&&!this.props.request_name||(/^\s*$/.test(this.state.name)?e.name=!0:e.name=!1),this.props.is_authenticated&&!this.props.request_email_address||(/\S+@\S+\.\S+/.test(this.state.email)?e.email=!1:e.email=!0),this.setState({errors:e}),!(this.state.errors.comment||this.state.errors.name||this.state.errors.email)}},{key:"render_field_comment",value:function(){var e="form-group d-flex mb-0",t="form-control form-control-sm text-xs",r="",n=a.a.createElement("img",{className:"avatar rounded-circle avatar-sm mr-3",src:this.props.avatar_url,height:"48",width:"48"});this.state.reply_to>0&&(t+=" form-control-sm"),this.state.errors.comment&&(e+=this.state.errors.comment?" has-danger":"",t+=" is-invalid",r=this.fhelp);var o=m.a.gettext("Your comment");return a.a.createElement("div",{className:e},n,a.a.createElement("textarea",{required:!0,name:"comment",id:"id_comment",placeholder:o,maxLength:"3000",rows:"2",className:t,value:this.state.comment,onChange:this.handle_input_change,onBlur:this.handle_blur("comment")}),r)}},{key:"render_field_name",value:function(){if(this.props.is_authenticated&&!this.props.request_name)return"";var e="form-group d-flex mb-0 mt-1",t="col-form-label text-xs mr-3",r="form-control form-control-sm",n="",o=m.a.gettext("name");return this.state.reply_to>0&&(t+=" form-control-sm",r+=" form-control-sm"),this.state.errors.name&&(e+=" has-danger",r+=" is-invalid",n=this.fhelp),a.a.createElement("div",{className:e},a.a.createElement("label",{htmlFor:"id_name",className:t},m.a.gettext("Name")),a.a.createElement("div",{className:"col-md-7"},a.a.createElement("input",{type:"text",name:"name",required:!0,id:"id_name",value:this.state.name,placeholder:o,onChange:this.handle_input_change,onBlur:this.handle_blur("name"),className:r}),n))}},{key:"render_field_email",value:function(){if(this.props.is_authenticated&&!this.props.request_email_address)return"";var e="form-group row pt-2",t="col-form-label col-md-3 text-right",r="form-control form-control-sm",n="form-text small",o={},i=m.a.gettext("mail address"),s=m.a.gettext("Required for comment verification.");return this.state.reply_to>0&&(t+=" form-control-sm",r+=" form-control-sm",o={fontSize:"0.710rem"}),this.state.errors.email&&(e+=" has-danger",r+=" is-invalid",n+=" invalid-feedback"),a.a.createElement("div",{className:e},a.a.createElement("label",{htmlFor:"id_email",className:t},m.a.gettext("Mail")),a.a.createElement("div",{className:"col-md-7"},a.a.createElement("input",{type:"text",name:"email",required:!0,id:"id_email",value:this.state.email,placeholder:i,onChange:this.handle_input_change,onBlur:this.handle_blur("email"),className:r}),a.a.createElement("span",{className:n,style:o},s)))}},{key:"render_field_url",value:function(){if(this.props.is_authenticated)return"";var e="col-form-label col-md-3 text-right",t="form-control";if(this.state.reply_to>0&&(e+=" form-control-sm",t+=" form-control-sm"),this.state.errors.url)var r=m.a.gettext("url your name links to (optional)");return a.a.createElement("div",{className:"form-group row"},a.a.createElement("label",{htmlFor:"id_url",className:e},m.a.gettext("Link")),a.a.createElement("div",{className:"col-md-7"},a.a.createElement("input",{type:"text",name:"url",id:"id_url",value:this.state.url,placeholder:r,onChange:this.handle_input_change,className:t})))}},{key:"render_field_followup",value:function(){return m.a.gettext("Notify me about follow-up comments"),this.state.reply_to>0&&"_".concat(this.state.reply_to),""}},{key:"reset_form",value:function(){this.setState({name:"",email:"",url:"",followup:!1,comment:"",visited:{name:!1,email:!1,comment:!1},errors:{name:!1,email:!1,comment:!1}})}},{key:"handle_submit_response",value:function(e){var t="",r={202:m.a.gettext("Your comment will be reviewed. Thank your for your patience."),204:m.a.gettext("Thank you, a comment confirmation request has been sent by mail."),403:m.a.gettext("Sorry, your comment has been rejected.")};t=403==e?"alert alert-danger":"alert alert-info",this.setState({alert:{message:r[e],cssc:t},previewing:!1}),this.reset_form(),this.props.on_comment_created()}},{key:"handle_ajax_error",value:function(e,t,r){if(400==e.status){var n=this.state.errors;e.responseJSON.forEach((function(e,t,r){n[e]=!0})),this.setState({errors:n})}else 403==e.status?this.handle_submit_response(e.status):console.error(e,t,r.toString())}},{key:"handle_submit",value:function(e){if(e.preventDefault(),this.validate()){var t={content_type:this.props.form.content_type,object_pk:this.props.form.object_pk,timestamp:this.props.form.timestamp,security_hash:this.props.form.security_hash,honeypot:"",comment:this.state.comment,name:this.state.name,email:this.state.email,url:this.state.url,followup:this.state.followup,reply_to:this.state.reply_to};l.a.ajax({method:"POST",url:this.props.send_url,data:t,dataType:"json",cache:!1,success:function(e,t,r){[201,202,204].indexOf(r.status)>-1&&this.handle_submit_response(r.status)}.bind(this),error:this.handle_ajax_error})}}},{key:"handle_preview",value:function(e){e.preventDefault(),this.validate()&&l.a.ajax({method:"POST",url:this.props.preview_url,data:{email:this.state.email},dataType:"json",success:function(e,t,r){200===r.status&&this.setState({avatar_url:e.url,previewing:!0})}.bind(this),error:this.handle_ajax_error})}},{key:"rawMarkup",value:function(){var e=(new p.a).render(this.state.comment);return{__html:e}}},{key:"render_preview",value:function(){if(!this.state.previewing)return"";var e="",t=a.a.createElement("img",{className:"mr-3",src:this.state.avatar_url,height:"48",width:"48"});e=this.state.url?a.a.createElement("a",{href:this.state.url,target:"_new"},this.state.name):this.props.is_authenticated?this.props.current_user.split(":")[1]:this.state.name;var r="",n=m.a.gettext("Your comment in preview"),o=a.a.createElement("h5",{className:"text-left"},n);this.state.reply_to>0&&(o="",r=a.a.createElement("div",{className:"badge badge-info"},"preview"));var i=m.a.gettext("Now");return a.a.createElement("div",null,a.a.createElement("hr",null),o,a.a.createElement("div",{className:"media"},t,a.a.createElement("div",{className:"media-body"},a.a.createElement("div",{className:"comment pb-3"},a.a.createElement("h6",{className:"mb-1 small"},i," - ",e,"  ",r),a.a.createElement("div",{className:"preview",dangerouslySetInnerHTML:this.rawMarkup()})))))}},{key:"render_form",value:function(){var e=this.render_field_comment(),t=this.render_field_name(),r=this.render_field_email(),n=this.render_field_url(),o=this.render_field_followup(),i="btn btn-link btn-sm position-absolute right-1 top-1";return 0!=this.state.reply_to&&(i+=" btn-sm"),m.a.gettext("preview"),m.a.gettext("send"),a.a.createElement("form",{method:"POST",onSubmit:this.handle_submit,className:"position-relative"},a.a.createElement("input",{type:"hidden",name:"content_type",defaultValue:this.props.form.content_type}),a.a.createElement("input",{type:"hidden",name:"object_pk",defaultValue:this.props.form.object_pk}),a.a.createElement("input",{type:"hidden",name:"timestamp",defaultValue:this.props.form.timestamp}),a.a.createElement("input",{type:"hidden",name:"security_hash",defaultValue:this.props.form.security_hash}),a.a.createElement("input",{type:"hidden",name:"reply_to",defaultValue:this.state.reply_to}),a.a.createElement("fieldset",null,a.a.createElement("div",{style:{display:"none"}},a.a.createElement("input",{type:"text",name:"honeypot",defaultValue:""})),e," ",t," ",r," ",n," ",o),a.a.createElement("button",{type:"submit",name:"post",className:i},a.a.createElement("i",{class:"fas fa-paper-plane"}))," ")}},{key:"render",value:function(){this.render_preview();m.a.gettext("Post your comment");this.state.reply_to;var e="";this.state.alert.message&&(e=a.a.createElement("div",{className:this.state.alert.cssc},this.state.alert.message));var t=this.render_form();return a.a.createElement("div",null,e,t)}}])&&h(t.prototype,r),n&&h(t,n),i}(a.a.Component);function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=j(e);if(t){var a=j(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return S(this,r)}}function S(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(i,e);var t,r,n,o=k(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={current_user:e.settings.current_user},t}return t=i,(r=[{key:"_get_username_chunk",value:function(){var e=this.props.data.user_name,t="";if(this.props.data.user_url&&!this.props.data.is_removed&&(e=a.a.createElement("a",{href:this.props.data.user_url},e)),this.props.data.user_moderator){var r=m.a.gettext("moderator");t=a.a.createElement("span",{className:"badge badge-secondary"},r)}return a.a.createElement("span",null,e,t)}},{key:"_get_right_div_chunk",value:function(){var e="",t="";if(this.props.data.is_removed)return"";if(this.props.settings.is_authenticated&&this.props.settings.can_moderate){var r=m.a.gettext("remove comment");t=this.props.settings.delete_url.replace("0",this.props.data.id),e=a.a.createElement("a",{className:"mutedlink",href:t},a.a.createElement("i",{className:"fas fa-trash-alt",title:r}))}return a.a.createElement("div",{class:"float-right"},e)}},{key:"rawMarkup",value:function(){var e=(new p.a).render(this.props.data.comment);return{__html:e}}},{key:"render_comment_body",value:function(){var e="text-xs";return this.props.data.is_removed?(e+="text-muted",a.a.createElement("div",{className:e},a.a.createElement("em",null,this.props.data.comment))):a.a.createElement("div",{className:e,dangerouslySetInnerHTML:this.rawMarkup()})}},{key:"render",value:function(){var e="c"+this.props.data.id,t=this._get_username_chunk(),r=this._get_right_div_chunk(),n=this.render_comment_body(),o="";this.props.newcids.indexOf(this.props.data.id)>-1&&(o=a.a.createElement("span",null,a.a.createElement("span",{className:"badge badge-success"},"new")," "));var s=this.props.settings;return null!=this.props.data.children&&this.props.data.children.map(function(e){return a.a.createElement(i,{key:e.id,data:e,settings:s,newcids:this.props.newcids,on_comment_created:this.props.on_comment_created})}.bind(this)),a.a.createElement("div",{className:"media",id:e},a.a.createElement("img",{src:this.props.data.user_avatar,className:"mr-3 avatar rounded-circle avatar-sm mr-3",height:"36",width:"36"}),a.a.createElement("div",{className:"comment w-100"},a.a.createElement("a",{name:e}),a.a.createElement("h5",{className:"mb-0 text-xs"},a.a.createElement("div",{className:"mr-auto d-inline-block"},o,t,a.a.createElement("span",{class:"text-muted"}," - ",this.props.data.submit_date),"  ",a.a.createElement("a",{className:"permalink",href:this.props.data.permalink},"¶")),r),n))}}])&&E(t.prototype,r),n&&E(t,n),i}(a.a.Component);function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return T(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw o}}}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function C(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=A(e);if(t){var a=A(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return q(this,r)}}function q(e,t){return!t||"object"!==N(t)&&"function"!=typeof t?I(e):t}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var H=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(i,e);var t,r,n,o=D(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e),c("csrftoken"),t.state={previewing:!1,preview:{name:"",email:"",url:"",comment:""},tree:[],cids:[],newcids:[],counter:t.props.comment_count},t.handle_comment_created=t.handle_comment_created.bind(I(t)),t.handle_preview=t.handle_preview.bind(I(t)),t.handle_update=t.handle_update.bind(I(t)),t}return t=i,(r=[{key:"handle_comment_created",value:function(){this.load_comments()}},{key:"handle_preview",value:function(e,t,r,n){this.setState({preview:{name:e,email:t,url:r,comment:n},previewing:!0})}},{key:"handle_update",value:function(e){e.preventDefault(),this.load_comments()}},{key:"reset_preview",value:function(){this.setState({preview:{name:"",email:"",url:"",comment:""},previewing:!1})}},{key:"render_comment_counter",value:function(){if(this.state.counter>0){var e=m.a.ngettext("%s comment.","%s comments.",this.state.cids.length),t=m.a.interpolate(e,[this.state.cids.length]);return a.a.createElement("h5",{className:"text-left font-weight-bold mb-3"},t)}return""}},{key:"render_comment_form",value:function(){var e=this.props,t=e.allow_comments,r=e.who_can_post,n=e.is_authenticated,o=e.html_id_suffix;if(t){if("all"===r||"users"===r&&n)return a.a.createElement(g,R({},this.props,{on_comment_created:this.handle_comment_created}));var i="only-users-can-post-".concat(o),s=document.getElementById(i);return null!=s?a.a.createElement("div",{dangerouslySetInnerHTML:{__html:s.innerHTML}}):a.a.createElement("h5",{className:"mt-4 mb-5 text-center text-info"},m.a.gettext("Only registered users can post comments."))}return a.a.createElement("h4",{className:"mt-4 mb-5 text-center text-secondary"},m.a.gettext("Comments are disabled for this article."))}},{key:"render_update_alert",value:function(){var e=this.state.counter-this.state.cids.length;if(e>0){var t=m.a.ngettext("There is %s new comment.","There are %s new comments.",e),r=m.a.interpolate(t,[e]);return a.a.createElement("div",{className:"alert alert-secondary d-flex align-items-center py-2"},a.a.createElement("span",{className:"mr-auto text-xs"},r),a.a.createElement("button",{type:"button",className:"btn btn-primary btn-sm",onClick:this.handle_update},"update"))}return""}},{key:"create_tree",value:function(e){var t=new Array,r=new Array,n={},a={},o=[],i=[],s=[];function l(e){return a[e].map((function(e){return null==n[e].children&&(n[e].children=l(e)),n[e]}))}var c,u=P(e.results);try{for(u.s();!(c=u.n()).done;){var m=c.value;o.push(m.id),n[m.id]=m,0==m.level&&r.push(m.id),a[m.id]=[],m.parent_id!==m.id&&a[m.parent_id].push(m.id)}}catch(e){u.e(e)}finally{u.f()}for(var p=0,f=r;p<f.length;p++){var h=f[p];n[h].children=l(h),t.push(n[h])}if(o.length)if(this.state.cids.length){var d,_=P(o);try{for(_.s();!(d=_.n()).done;){var y=d.value;-1==this.state.cids.indexOf(y)&&s.push(y),i.push(y)}}catch(e){_.e(e)}finally{_.f()}}else i=o,s=[];this.setState({tree:t,cids:i,newcids:s,counter:i.length})}},{key:"load_comments",value:function(){l.a.ajax({url:this.props.list_url,dataType:"json",cache:!1,success:function(e){this.create_tree(e)}.bind(this),error:function(e,t,r){console.error(this.props.list_url,t,r.toString())}.bind(this)})}},{key:"load_count",value:function(){l.a.ajax({url:this.props.count_url,dataType:"json",cache:!1,success:function(e){this.setState({counter:e.count})}.bind(this),error:function(e,t,r){console.error(this.props.count_url,t,r.toString())}.bind(this)})}},{key:"componentDidMount",value:function(){this.load_comments(),this.props.polling_interval&&setInterval(this.load_count.bind(this),this.props.polling_interval)}},{key:"render",value:function(){var e=this.props,t=this.render_comment_counter(),r=this.render_update_alert(),n=this.render_comment_form(),o=this.state.tree.map(function(t){return a.a.createElement(O,{key:t.id,data:t,settings:e,newcids:this.state.newcids,on_comment_created:this.handle_comment_created})}.bind(this));return a.a.createElement("div",null,this.state.counter>0?a.a.createElement("div",{className:"card-footer"},r,t,a.a.createElement("div",{className:"comment-tree"},a.a.createElement("div",{className:"media-list"},o))):"",a.a.createElement("div",{className:"card-footer pb-2"},n))}}])&&C(t.prototype,r),n&&C(t,n),i}(a.a.Component);i.a.render(a.a.createElement(H,Object.assign(window.comments_props,window.comments_props_override)),document.getElementById("comments"))}]);
//# sourceMappingURL=plugin-2.8.1.js.map